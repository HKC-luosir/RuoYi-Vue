<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.apollo.usv.mapper.BoatStatusMapper">
    
    <resultMap type="BoatStatus" id="BoatStatusResult">
        <result property="id"    column="boat_status_id"    />
        <result property="boatSn"    column="boat_sn"    />
        <result property="routeSn"    column="route_sn"    />
        <result property="longitude"    column="longitude"    />
        <result property="latitude"    column="latitude"    />
        <result property="motorSpeed"    column="motor_speed"    />
        <result property="voltage"    column="voltage"    />
        <result property="current"    column="current"    />
        <result property="temperature"    column="temperature"    />
        <result property="batteryStatus"    column="battery_status"    />
        <result property="batteryPower"    column="battery_power"    />
        <result property="time"    column="time"    />
    </resultMap>

    <sql id="selectBoatStatusVo">
        select boat_status_id, boat_sn, route_sn, longitude, latitude, motor_speed, voltage, current, temperature, battery_status, battery_power, time from usv_boat_status
    </sql>

    <select id="selectBoatStatusList" parameterType="BoatStatus" resultMap="BoatStatusResult">
        <include refid="selectBoatStatusVo"/>
        <where>  
            <if test="boatSn != null  and boatSn != ''"> and boat_sn = #{boatSn}</if>
            <if test="routeSn != null  and routeSn != ''"> and route_sn like concat('%', #{routeSn}, '%')</if>
            <if test="params.beginTime != null and params.beginTime != '' and params.endTime != null and params.endTime != ''"> and time between #{params.beginTime} and #{params.endTime}</if>
        </where>
    </select>
    
    <select id="selectBoatStatusById" parameterType="Long" resultMap="BoatStatusResult">
        <include refid="selectBoatStatusVo"/>
        where boat_status_id = #{id}
    </select>
        
    <insert id="insertBoatStatus" parameterType="BoatStatus" useGeneratedKeys="true" keyProperty="id">
        insert into usv_boat_status
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="boatSn != null and boatSn != ''">boat_sn,</if>
            <if test="routeSn != null">route_sn,</if>
            <if test="longitude != null and longitude != ''">longitude,</if>
            <if test="latitude != null and latitude != ''">latitude,</if>
            <if test="motorSpeed != null">motor_speed,</if>
            <if test="voltage != null">voltage,</if>
            <if test="current != null">current,</if>
            <if test="temperature != null">temperature,</if>
            <if test="batteryStatus != null">battery_status,</if>
            <if test="batteryPower != null">battery_power,</if>
            <if test="time != null">time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="boatSn != null and boatSn != ''">#{boatSn},</if>
            <if test="routeSn != null">#{routeSn},</if>
            <if test="longitude != null and longitude != ''">#{longitude},</if>
            <if test="latitude != null and latitude != ''">#{latitude},</if>
            <if test="motorSpeed != null">#{motorSpeed},</if>
            <if test="voltage != null">#{voltage},</if>
            <if test="current != null">#{current},</if>
            <if test="temperature != null">#{temperature},</if>
            <if test="batteryStatus != null">#{batteryStatus},</if>
            <if test="batteryPower != null">#{batteryPower},</if>
            <if test="time != null">#{time},</if>
         </trim>
    </insert>

    <update id="updateBoatStatus" parameterType="BoatStatus">
        update usv_boat_status
        <trim prefix="SET" suffixOverrides=",">
            <if test="boatSn != null and boatSn != ''">boat_sn = #{boatSn},</if>
            <if test="routeSn != null">route_sn = #{routeSn},</if>
            <if test="longitude != null and longitude != ''">longitude = #{longitude},</if>
            <if test="latitude != null and latitude != ''">latitude = #{latitude},</if>
            <if test="motorSpeed != null">motor_speed = #{motorSpeed},</if>
            <if test="voltage != null">voltage = #{voltage},</if>
            <if test="current != null">current = #{current},</if>
            <if test="temperature != null">temperature = #{temperature},</if>
            <if test="batteryStatus != null">battery_status = #{batteryStatus},</if>
            <if test="batteryPower != null">battery_power = #{batteryPower},</if>
            <if test="time != null">time = #{time},</if>
        </trim>
        where boat_status_id = #{id}
    </update>

    <delete id="deleteBoatStatusById" parameterType="Long">
        delete from usv_boat_status where boat_status_id = #{id}
    </delete>

    <delete id="deleteBoatStatusByIds" parameterType="String">
        delete from usv_boat_status where boat_status_id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>