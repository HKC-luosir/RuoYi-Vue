<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.common.mapper.CityMapper">

    <resultMap type="City" id="CityResult">
            <result property="code" column="code"/>
            <result property="cityName" column="cityName"/>
            <result property="province" column="province"/>
    </resultMap>

    <sql id="selectCityVo">
        select code, cityName, province
        from city
    </sql>

    <select id="selectCityList" parameterType="City" resultMap="CityResult">
        <include refid="selectCityVo"/>
        <where>
                        <if test="cityName != null  and cityName != ''">
                            and cityName like concat('%', #{cityName}, '%')
                        </if>
                        <if test="province != null  and province != ''">
                            and province = #{province}
                        </if>
        </where>
    </select>

    <select id="selectCityByCode" parameterType="Long"
            resultMap="CityResult">
            <include refid="selectCityVo"/>
            where code = #{code}
    </select>

    <insert id="insertCity" parameterType="City">
        insert into city
        <trim prefix="(" suffix=")" suffixOverrides=",">
                    <if test="code != null">code,
                    </if>
                    <if test="cityName != null">cityName,
                    </if>
                    <if test="province != null">province,
                    </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
                    <if test="code != null">#{code},
                    </if>
                    <if test="cityName != null">#{cityName},
                    </if>
                    <if test="province != null">#{province},
                    </if>
        </trim>
    </insert>

    <update id="updateCity" parameterType="City">
        update city
        <trim prefix="SET" suffixOverrides=",">
                    <if test="cityName != null">cityName =
                        #{cityName},
                    </if>
                    <if test="province != null">province =
                        #{province},
                    </if>
        </trim>
        where code = #{code}
    </update>

    <delete id="deleteCityByCode" parameterType="Long">
        delete
        from city where code = #{code}
    </delete>

    <delete id="deleteCityByCodes" parameterType="String">
        delete from city where code in
        <foreach item="code" collection="array" open="(" separator="," close=")">
            #{code}
        </foreach>
    </delete>
</mapper>