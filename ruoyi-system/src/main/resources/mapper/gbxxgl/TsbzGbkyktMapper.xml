<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.gbxxgl.mapper.TsbzGbkyktMapper">

    <resultMap type="TsbzGbkykt" id="TsbzGbkyktResult">
        <result property="id" column="id"/>
        <result property="gbid" column="gbid"/>
        <result property="yjly" column="yjly"/>
        <result property="lxktmc" column="lxktmc"/>
        <result property="lxktjb" column="lxktjb"/>
        <result property="lxktlb" column="lxktlb"/>
        <result property="lxrq" column="lxrq"/>
        <result property="jtrq" column="jtrq"/>
        <result property="jdjg" column="jdjg"/>
        <result property="cdjs" column="cdjs"/>
        <result property="isdel" column="isdel"/>
        <result property="createUserid" column="create_userid"/>
        <result property="createTime" column="create_time"/>
        <result property="dqzt" column="dqzt"/>
        <association property="tsbzGbjbqk" column="gbid" javaType="TsbzGbjbqk" resultMap="TsbzGbjbqkResult"/>
    </resultMap>

    <resultMap type="TsbzGbjbqk" id="TsbzGbjbqkResult">
        <result property="id" column="id"/>
        <result property="otherid" column="otherid"/>
        <result property="name" column="name"/>
        <result property="xb" column="xb"/>
        <result property="deptId" column="dept_id"/>
        <result property="dwmc" column="dwmc"/>
        <result property="dwjc" column="dwjc"/>
        <result property="xrxzzw" column="xrxzzw"/>
        <result property="xrdnzw" column="xrdnzw"/>
        <result property="xrqtzw" column="xrqtzw"/>
        <result property="rxzwny" column="rxzwny"/>
        <result property="xrxzzj" column="xrxzzj"/>
        <result property="xzzjqdny" column="xzzjqdny"/>
        <result property="sfhbgb" column="sfhbgb"/>
        <result property="hbgbqdny" column="hbgbqdny"/>
        <result property="sfzh" column="sfzh"/>
        <result property="updatetime" column="updatetime"/>
        <result property="mz" column="mz"/>
        <result property="jg" column="jg"/>
        <result property="jgProvince" column="jg_province"/>
        <result property="jgCityname" column="jg_cityname"/>
        <result property="jgCity" column="jg_city"/>
        <result property="jgAreaname" column="jg_areaname"/>
        <result property="jgArea" column="jg_area"/>
        <result property="csdProvince" column="csd_province"/>
        <result property="csdCityname" column="csd_cityname"/>
        <result property="csdCity" column="csd_city"/>
        <result property="csdAreaname" column="csd_areaname"/>
        <result property="csdArea" column="csd_area"/>
        <result property="csd" column="csd"/>
        <result property="csrq" column="csrq"/>
        <result property="cjgzny" column="cjgzny"/>
        <result property="jtzz" column="jtzz"/>
        <result property="dwdz" column="dwdz"/>
        <result property="xl" column="xl"/>
        <result property="xw" column="xw"/>
        <result property="byyx" column="byyx"/>
        <result property="jylx" column="jylx"/>
        <result property="zc" column="zc"/>
        <result property="jzcyqk" column="jzcyqk"/>
        <result property="nfkc" column="nfkc"/>
        <result property="hyzk" column="hyzk"/>
        <result property="zzmm" column="zzmm"/>
        <result property="rdsj" column="rdsj"/>
        <result property="bgsdh" column="bgsdh"/>
        <result property="phone" column="phone"/>
        <result property="rjxk" column="rjxk"/>
        <result property="jkzk" column="jkzk"/>
        <result property="createTime" column="create_time"/>
        <result property="createUser" column="create_user"/>
        <result property="dqzt" column="dqzt"/>
        <result property="txTime" column="tx_time"/>
        <result property="userId" column="user_id"/>
    </resultMap>

    <sql id="selectTsbzGbkyktVo">
        select a.id, a.gbid, a.yjly, a.lxktmc, a.lxktjb, a.lxktlb, a.lxrq, a.jtrq, a.jdjg, a.cdjs, a.isdel, a.create_userid, a.create_time,b.name,b.dept_id,b.user_id from tsbz_gbkykt  a
        left join tsbz_gbjbqk b on a.gbid=b.id
    </sql>

    <select id="selectTsbzGbkyktList" parameterType="TsbzGbkykt" resultMap="TsbzGbkyktResult">
        <include refid="selectTsbzGbkyktVo"/>
        <where>
            a.isdel = 0
<!--            <if test="dqzt != null  and dqzt != ''"> and b.dqzt = #{dqzt}</if>-->
            <if test="gbid != null ">and a.gbid = #{gbid}</if>
            <if test="yjly != null  and yjly != ''">and a.yjly = #{yjly}</if>
            <if test="lxktmc != null  and lxktmc != ''">and a.lxktmc = #{lxktmc}</if>
            <if test="lxktjb != null  and lxktjb != ''">and a.lxktjb = #{lxktjb}</if>
            <if test="lxktlb != null  and lxktlb != ''">and a.lxktlb = #{lxktlb}</if>
            <if test="lxrq != null ">and a.lxrq = #{lxrq}</if>
            <if test="jtrq != null ">and a.jtrq = #{jtrq}</if>
            <if test="jdjg != null  and jdjg != ''">and a.jdjg = #{jdjg}</if>
            <if test="cdjs != null  and cdjs != ''">and a.cdjs = #{cdjs}</if>
            <if test="createUserid != null ">and a.create_userid = #{createUserid}</if>
        </where>
        <!-- 数据范围过滤 -->
        ${params.dataScope}
        order by lxrq
    </select>

    <select id="selectTsbzGbkyktById" parameterType="Long" resultMap="TsbzGbkyktResult">
        <include refid="selectTsbzGbkyktVo"/>
        where a.id = #{id}
    </select>

    <insert id="insertTsbzGbkykt" parameterType="TsbzGbkykt" useGeneratedKeys="true" keyProperty="id">
        insert into tsbz_gbkykt
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="gbid != null">gbid,</if>
            <if test="yjly != null">yjly,</if>
            <if test="lxktmc != null">lxktmc,</if>
            <if test="lxktjb != null">lxktjb,</if>
            <if test="lxktlb != null">lxktlb,</if>
            <if test="lxrq != null">lxrq,</if>
            <if test="jtrq != null">jtrq,</if>
            <if test="jdjg != null">jdjg,</if>
            <if test="cdjs != null">cdjs,</if>
            <if test="isdel != null">isdel,</if>
            <if test="createUserid != null">create_userid,</if>
            <if test="createTime != null">create_time,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="gbid != null">#{gbid},</if>
            <if test="yjly != null">#{yjly},</if>
            <if test="lxktmc != null">#{lxktmc},</if>
            <if test="lxktjb != null">#{lxktjb},</if>
            <if test="lxktlb != null">#{lxktlb},</if>
            <if test="lxrq != null">#{lxrq},</if>
            <if test="jtrq != null">#{jtrq},</if>
            <if test="jdjg != null">#{jdjg},</if>
            <if test="cdjs != null">#{cdjs},</if>
            <if test="isdel != null">#{isdel},</if>
            <if test="createUserid != null">#{createUserid},</if>
            <if test="createTime != null">#{createTime},</if>
        </trim>
    </insert>

    <update id="updateTsbzGbkykt" parameterType="TsbzGbkykt">
        update tsbz_gbkykt
        <trim prefix="SET" suffixOverrides=",">
            <if test="gbid != null">gbid = #{gbid},</if>
            <if test="yjly != null">yjly = #{yjly},</if>
            <if test="lxktmc != null">lxktmc = #{lxktmc},</if>
            <if test="lxktjb != null">lxktjb = #{lxktjb},</if>
            <if test="lxktlb != null">lxktlb = #{lxktlb},</if>
            <if test="lxrq != null">lxrq = #{lxrq},</if>
            <if test="jtrq != null">jtrq = #{jtrq},</if>
            <if test="jdjg != null">jdjg = #{jdjg},</if>
            <if test="cdjs != null">cdjs = #{cdjs},</if>
            <if test="isdel != null">isdel = #{isdel},</if>
            <if test="createUserid != null">create_userid = #{createUserid},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteTsbzGbkyktById" parameterType="Long">
        delete from tsbz_gbkykt where id = #{id}
    </delete>

    <delete id="deleteTsbzGbkyktByIds" parameterType="String">
        delete from tsbz_gbkykt where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

</mapper>