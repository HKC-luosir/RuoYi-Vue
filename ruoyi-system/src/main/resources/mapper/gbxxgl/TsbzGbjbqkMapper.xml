<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.gbxxgl.mapper.TsbzGbjbqkMapper">

    <resultMap type="TsbzGbjbqk" id="TsbzGbjbqkResult">
        <result property="id" column="id"/>
        <result property="otherid" column="otherid"/>
        <result property="name" column="name"/>
        <result property="xb" column="xb"/>
        <result property="deptId" column="dept_id"/>
        <result property="dwmc" column="dwmc"/>
        <result property="dwjc" column="dwjc"/>
        <result property="xrxzzw" column="xrxzzw"/>
        <result property="xrdnzw" column="xrdnzw"/>
        <result property="xrqtzw" column="xrqtzw"/>
        <result property="rxzwny" column="rxzwny"/>
        <result property="xrxzzj" column="xrxzzj"/>
        <result property="xzzjqdny" column="xzzjqdny"/>
        <result property="sfhbgb" column="sfhbgb"/>
        <result property="hbgbqdny" column="hbgbqdny"/>
        <result property="sfzh" column="sfzh"/>
        <result property="updatetime" column="updatetime"/>
        <result property="mz" column="mz"/>
        <result property="jg" column="jg"/>
        <result property="jgProvince" column="jg_province"/>
        <result property="jgCityname" column="jg_cityname"/>
        <result property="jgCity" column="jg_city"/>
        <result property="jgAreaname" column="jg_areaname"/>
        <result property="jgArea" column="jg_area"/>
        <result property="csdProvince" column="csd_province"/>
        <result property="csdCityname" column="csd_cityname"/>
        <result property="csdCity" column="csd_city"/>
        <result property="csdAreaname" column="csd_areaname"/>
        <result property="csdArea" column="csd_area"/>
        <result property="csd" column="csd"/>
        <result property="csrq" column="csrq"/>
        <result property="cjgzny" column="cjgzny"/>
        <result property="jtzz" column="jtzz"/>
        <result property="dwdz" column="dwdz"/>
        <result property="dyxl" column="dyxl"/>
        <result property="xl" column="xl"/>
        <result property="xw" column="xw"/>
        <result property="byyx" column="byyx"/>
        <result property="jylx" column="jylx"/>
        <result property="zc" column="zc"/>
        <result property="jzcyqk" column="jzcyqk"/>
        <result property="nfkc" column="nfkc"/>
        <result property="hyzk" column="hyzk"/>
        <result property="zzmm" column="zzmm"/>
        <result property="rdsj" column="rdsj"/>
        <result property="bgsdh" column="bgsdh"/>
        <result property="phone" column="phone"/>
        <result property="rjxk" column="rjxk"/>
        <result property="jkzk" column="jkzk"/>
        <result property="createTime" column="create_time"/>
        <result property="createUser" column="create_user"/>
        <result property="dqzt" column="dqzt"/>
        <result property="txTime" column="tx_time"/>
        <result property="xxlb" column="xxlb"/>
        <result property="xxbb" column="xxbb"/>
        <association property="dept" column="dept_id" javaType="SysDept" resultMap="deptResult"/>
    </resultMap>

    <resultMap id="deptResult" type="SysDept">
        <id property="deptId" column="dept_id"/>
        <result property="parentId" column="parent_id"/>
        <result property="deptName" column="dept_name"/>
        <result property="orderNum" column="order_num"/>
        <result property="leader" column="leader"/>
        <result property="status" column="dept_status"/>
    </resultMap>

    <sql id="selectTsbzGbjbqkVo">
        select u.id, u.otherid, u.name, u.xb, u.dept_id, u.dwmc, u.dwjc, u.xrxzzw, u.xrdnzw, u.xrqtzw, u.rxzwny, u.xrxzzj, u.xzzjqdny, u.sfhbgb, u.hbgbqdny, u.sfzh, u.updatetime, u.mz, u.jg, u.jg_province, u.jg_cityname, u.jg_city, u.jg_areaname, u.jg_area, u.csd, u.csd_province, u.csd_cityname, u.csd_city, u.csd_areaname, u.csd_area,  u.csrq, u.cjgzny, u.jtzz, u.dwdz, u.dyxl, u.xl, u.xw, u.byyx, u.jylx, u.zc, u.jzcyqk, u.nfkc, u.hyzk, u.zzmm, u.rdsj, u.bgsdh, u.phone, u.rjxk, u.jkzk, u.create_user, u.create_time,u.dqzt,u.tx_time,d.dept_name from tsbz_gbjbqk u
        left join sys_dept d on u.dept_id = d.dept_id
    </sql>

    <select id="selectTsbzGbjbqkList" parameterType="TsbzGbjbqk" resultMap="TsbzGbjbqkResult">
        <include refid="selectTsbzGbjbqkVo"/>
        <where>
            <if test="otherid != null  and otherid != ''">and u.otherid = #{otherid}</if>
            <if test="name != null  and name != ''">and u.name like concat('%', #{name}, '%')</if>
            <if test="xb != null  and xb != ''">and u.xb = #{xb}</if>
<!--            <if test="deptId != null  and deptId != ''">and dept_id = #{deptId}</if>-->
            <if test="dwmc != null  and dwmc != ''">and u.dwmc = #{dwmc}</if>
            <if test="dwjc != null  and dwjc != ''">and u.dwjc = #{dwjc}</if>
            <if test="xrxzzw != null  and xrxzzw != ''">and u.xrxzzw = #{xrxzzw}</if>
            <if test="xrdnzw != null  and xrdnzw != ''">and u.xrdnzw = #{xrdnzw}</if>
            <if test="xrqtzw != null  and xrqtzw != ''">and u.xrqtzw = #{xrqtzw}</if>
            <if test="rxzwny != null ">and u.rxzwny = #{rxzwny}</if>
            <if test="xrxzzj != null  and xrxzzj != ''">and u.xrxzzj = #{xrxzzj}</if>
            <if test="xzzjqdny != null ">and u.xzzjqdny = #{xzzjqdny}</if>
            <if test="sfhbgb != null  and sfhbgb != ''">and u.sfhbgb = #{sfhbgb}</if>
            <if test="hbgbqdny != null ">and DATE_FORMAT(u.hbgbqdny, '%Y') = DATE_FORMAT(#{hbgbqdny},'%Y')</if>
            <if test="sfzh != null  and sfzh != ''">and u.sfzh = #{sfzh}</if>
            <if test="updatetime != null ">and u.updatetime = #{updatetime}</if>
            <if test="mz != null  and mz != ''">and u.mz = #{mz}</if>
            <if test="jg != null  and jg != ''">and u.jg = #{jg}</if>
            <if test="jgProvince != null  and jgProvince != ''">and u.jg_province = #{jgProvince}</if>
            <if test="jgCity != null  and jgCity != ''">and u.jg_city = #{jgCity}</if>
            <if test="jgCityname != null  and jgCityname != ''">and u.jg_cityname = #{jgCityname}</if>
            <if test="jgArea != null  and jgArea != ''">and u.jg_area = #{jgArea}</if>
            <if test="jgAreaname != null  and jgAreaname != ''">and u.jg_areaname = #{jgAreaname}</if>
            <if test="csdProvince != null  and csdProvince != ''">and u.csd_province = #{csdProvince}</if>
            <if test="csdCity != null  and csdCity != ''">and u.csd_city = #{csdCity}</if>
            <if test="csdCityname != null  and csdCityname != ''">and u.csd_cityname = #{csdCityname}</if>
            <if test="csdArea != null  and csdArea != ''">and u.csd_area = #{csdArea}</if>
            <if test="csdAreaname != null  and csdAreaname != ''">and u.csd_areaname = #{csdAreaname}</if>
            <if test="csd != null  and csd != ''">and u.csd = #{csd}</if>
            <if test="csrq != null ">and u.csrq = #{csrq}</if>
            <if test="cjgzny != null ">and u.cjgzny = #{cjgzny}</if>
            <if test="jtzz != null  and jtzz != ''">and u.jtzz = #{jtzz}</if>
            <if test="dwdz != null  and dwdz != ''">and u.dwdz = #{dwdz}</if>
            <if test="dyxl != null  and dyxl != ''">and u.dyxl = #{dyxl}</if>
            <if test="xl != null  and xl != ''">and u.xl = #{xl}</if>
            <if test="xw != null  and xw != ''">and u.xw = #{xw}</if>
            <if test="byyx != null  and byyx != ''">and u.byyx = #{byyx}</if>
            <if test="jylx != null  and jylx != ''">and u.jylx = #{jylx}</if>
            <if test="zc != null  and zc != ''">and u.zc = #{zc}</if>
            <if test="jzcyqk != null  and jzcyqk != ''">and u.jzcyqk = #{jzcyqk}</if>
            <if test="nfkc != null  and nfkc != ''">and u.nfkc = #{nfkc}</if>
            <if test="hyzk != null  and hyzk != ''">and u.hyzk = #{hyzk}</if>
            <if test="zzmm != null  and zzmm != ''">and u.zzmm = #{zzmm}</if>
            <if test="rdsj != null ">and u.rdsj = #{rdsj}</if>
            <if test="bgsdh != null  and bgsdh != ''">and u.bgsdh = #{bgsdh}</if>
            <if test="phone != null  and phone != ''">and u.phone = #{phone}</if>
            <if test="rjxk != null  and rjxk != ''">and u.rjxk = #{rjxk}</if>
            <if test="jkzk != null  and jkzk != ''">and u.jkzk = #{jkzk}</if>
            <if test="createUser != null  and createUser != ''">and u.create_user = #{createUser}</if>
            <if test="createTime != null  and createTime != ''">and u.create_time = #{createTime}</if>
            <if test="dqzt != null  and dqzt != ''"> and u.dqzt = #{dqzt}</if>
             <!--需求是 获取进5年退休人员数据-->
            <if test="dqzt=='99'"> and u.tx_time>date(date_add(now(),interval-5 year))</if>
            <if test="deptId != null and deptId != 0">
                AND (u.dept_id = #{deptId} OR u.dept_id IN ( SELECT t.dept_id FROM sys_dept t WHERE FIND_IN_SET
                (#{deptId},ancestors) ))
            </if>
            <if test="xxlb != null and xxlb != ''">
                AND d.dwlb =#{xxlb}
            </if>
            <if test="xxbb != null and xxbb != ''">
                AND d.dwbb =#{xxbb}
            </if>
            <!-- 数据范围过滤 -->
            ${params.dataScope}
        </where>
    </select>

    <select id="selectTsbzGbjbqkById" parameterType="Long" resultMap="TsbzGbjbqkResult">
        <include refid="selectTsbzGbjbqkVo"/>
        where id = #{id}
    </select>

    <insert id="insertTsbzGbjbqk" parameterType="TsbzGbjbqk" useGeneratedKeys="true" keyProperty="id">
        insert into tsbz_gbjbqk
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="otherid != null">otherid,</if>
            <if test="name != null">name,</if>
            <if test="xb != null">xb,</if>
            <if test="deptId != null">dept_id,</if>
            <if test="dwmc != null">dwmc,</if>
            <if test="dwjc != null">dwjc,</if>
            <if test="xrxzzw != null">xrxzzw,</if>
            <if test="xrdnzw != null">xrdnzw,</if>
            <if test="xrqtzw != null">xrqtzw,</if>
            <if test="rxzwny != null">rxzwny,</if>
            <if test="xrxzzj != null">xrxzzj,</if>
            <if test="xzzjqdny != null">xzzjqdny,</if>
            <if test="sfhbgb != null">sfhbgb,</if>
            <if test="hbgbqdny != null">hbgbqdny,</if>
            <if test="sfzh != null">sfzh,</if>
            <if test="updatetime != null">updatetime,</if>
            <if test="mz != null">mz,</if>
            <if test="jg != null">jg,</if>
            <if test="jgProvince != null">jg_province,</if>
            <if test="jgCity != null">jg_city,</if>
            <if test="jgCityname != null">jg_cityname,</if>
            <if test="jgArea != null">jg_area,</if>
            <if test="jgAreaname != null">jg_areaname,</if>
            <if test="csdProvince != null">csd_province,</if>
            <if test="csdCity != null">csd_city,</if>
            <if test="csdCityname != null">csd_cityname,</if>
            <if test="csdArea != null">csd_area,</if>
            <if test="csdAreaname != null">csd_areaname,</if>
            <if test="csd != null">csd,</if>
            <if test="csrq != null">csrq,</if>
            <if test="cjgzny != null">cjgzny,</if>
            <if test="jtzz != null">jtzz,</if>
            <if test="dwdz != null">dwdz,</if>
            <if test="dyxl != null">dyxl,</if>
            <if test="xl != null">xl,</if>
            <if test="xw != null">xw,</if>
            <if test="byyx != null">byyx,</if>
            <if test="jylx != null">jylx,</if>
            <if test="zc != null">zc,</if>
            <if test="jzcyqk != null">jzcyqk,</if>
            <if test="nfkc != null">nfkc,</if>
            <if test="hyzk != null">hyzk,</if>
            <if test="zzmm != null">zzmm,</if>
            <if test="rdsj != null">rdsj,</if>
            <if test="bgsdh != null">bgsdh,</if>
            <if test="phone != null">phone,</if>
            <if test="rjxk != null">rjxk,</if>
            <if test="jkzk != null">jkzk,</if>
            <if test="createUser != null">create_user,</if>
            <if test="createTime != null">create_time,</if>
            <if test="dqzt != null">dqzt,</if>
            <if test="txTime != null">tx_time,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="otherid != null">#{otherid},</if>
            <if test="name != null">#{name},</if>
            <if test="xb != null">#{xb},</if>
            <if test="deptId != null">#{deptId},</if>
            <if test="dwmc != null">#{dwmc},</if>
            <if test="dwjc != null">#{dwjc},</if>
            <if test="xrxzzw != null">#{xrxzzw},</if>
            <if test="xrdnzw != null">#{xrdnzw},</if>
            <if test="xrqtzw != null">#{xrqtzw},</if>
            <if test="rxzwny != null">#{rxzwny},</if>
            <if test="xrxzzj != null">#{xrxzzj},</if>
            <if test="xzzjqdny != null">#{xzzjqdny},</if>
            <if test="sfhbgb != null">#{sfhbgb},</if>
            <if test="hbgbqdny != null">#{hbgbqdny},</if>
            <if test="sfzh != null">#{sfzh},</if>
            <if test="updatetime != null">#{updatetime},</if>
            <if test="mz != null">#{mz},</if>
            <if test="jg != null">#{jg},</if>
            <if test="jgProvince != null">#{jgProvince},</if>
            <if test="jgCity != null">#{jgCity},</if>
            <if test="jgCityname != null">#{jgCityname},</if>
            <if test="jgArea != null">#{jgArea},</if>
            <if test="jgAreaname != null">#{jgAreaname},</if>
            <if test="csdProvince != null">#{csdProvince},</if>
            <if test="csdCity != null">#{csdCity},</if>
            <if test="csdCityname != null">#{csdCityname},</if>
            <if test="csdArea != null">#{csdArea},</if>
            <if test="csdAreaname != null">#{csdAreaname},</if>
            <if test="csd != null">#{csd},</if>
            <if test="csrq != null">#{csrq},</if>
            <if test="cjgzny != null">#{cjgzny},</if>
            <if test="jtzz != null">#{jtzz},</if>
            <if test="dwdz != null">#{dwdz},</if>
            <if test="dyxl != null">#{dyxl},</if>
            <if test="xl != null">#{xl},</if>
            <if test="xw != null">#{xw},</if>
            <if test="byyx != null">#{byyx},</if>
            <if test="jylx != null">#{jylx},</if>
            <if test="zc != null">#{zc},</if>
            <if test="jzcyqk != null">#{jzcyqk},</if>
            <if test="nfkc != null">#{nfkc},</if>
            <if test="hyzk != null">#{hyzk},</if>
            <if test="zzmm != null">#{zzmm},</if>
            <if test="rdsj != null">#{rdsj},</if>
            <if test="bgsdh != null">#{bgsdh},</if>
            <if test="phone != null">#{phone},</if>
            <if test="rjxk != null">#{rjxk},</if>
            <if test="jkzk != null">#{jkzk},</if>
            <if test="createUser != null">#{createUser},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="dqzt != null">#{dqzt},</if>
            <if test="txTime != null">#{txTime},</if>
        </trim>
    </insert>

    <update id="updateTsbzGbjbqk" parameterType="TsbzGbjbqk">
        update tsbz_gbjbqk
        <trim prefix="SET" suffixOverrides=",">
            <if test="otherid != null">otherid = #{otherid},</if>
            <if test="name != null">name = #{name},</if>
            <if test="xb != null">xb = #{xb},</if>
            <if test="dwmc != null">dwmc = #{dwmc},</if>
            <if test="dwjc != null">dwjc = #{dwjc},</if>
            <if test="xrxzzw != null">xrxzzw = #{xrxzzw},</if>
            <if test="xrdnzw != null">xrdnzw = #{xrdnzw},</if>
            <if test="xrqtzw != null">xrqtzw = #{xrqtzw},</if>
            <if test="rxzwny != null">rxzwny = #{rxzwny},</if>
            <if test="xrxzzj != null">xrxzzj = #{xrxzzj},</if>
            <if test="xzzjqdny != null">xzzjqdny = #{xzzjqdny},</if>
            <if test="sfhbgb != null">sfhbgb = #{sfhbgb},</if>
            <if test="hbgbqdny != null">hbgbqdny = #{hbgbqdny},</if>
            <if test="sfzh != null">sfzh = #{sfzh},</if>
            <if test="updatetime != null">updatetime = #{updatetime},</if>
            <if test="mz != null">mz = #{mz},</if>
            <if test="jg != null">jg = #{jg},</if>
            <if test="jgProvince != null">jg_province = #{jgProvince},</if>
            <if test="jgCity != null">jg_city = #{jgCity},</if>
            <if test="jgCityname != null">jg_cityname = #{jgCityname},</if>
            <if test="jgArea != null">jg_area = #{jgArea},</if>
            <if test="jgAreaname != null">jg_areaname = #{jgAreaname},</if>
            <if test="csdProvince != null">csd_province = #{csdProvince},</if>
            <if test="csdCity != null">csd_city = #{csdCity},</if>
            <if test="csdCityname != null">csd_cityname = #{csdCityname},</if>
            <if test="csdArea != null">csd_area = #{csdArea},</if>
            <if test="csdAreaname != null">csd_areaname = #{csdAreaname},</if>
            <if test="csd != null">csd = #{csd},</if>
            <if test="csrq != null">csrq = #{csrq},</if>
            <if test="cjgzny != null">cjgzny = #{cjgzny},</if>
            <if test="jtzz != null">jtzz = #{jtzz},</if>
            <if test="dwdz != null">dwdz = #{dwdz},</if>
            <if test="dyxl != null">dyxl = #{dyxl},</if>
            <if test="xl != null">xl = #{xl},</if>
            <if test="xw != null">xw = #{xw},</if>
            <if test="byyx != null">byyx = #{byyx},</if>
            <if test="jylx != null">jylx = #{jylx},</if>
            <if test="zc != null">zc = #{zc},</if>
            <if test="jzcyqk != null">jzcyqk = #{jzcyqk},</if>
            <if test="nfkc != null">nfkc = #{nfkc},</if>
            <if test="hyzk != null">hyzk = #{hyzk},</if>
            <if test="zzmm != null">zzmm = #{zzmm},</if>
            <if test="rdsj != null">rdsj = #{rdsj},</if>
            <if test="bgsdh != null">bgsdh = #{bgsdh},</if>
            <if test="phone != null">phone = #{phone},</if>
            <if test="rjxk != null">rjxk = #{rjxk},</if>
            <if test="jkzk != null">jkzk = #{jkzk},</if>
            <if test="createUser != null">create_user = #{createUser},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="dqzt != null">dqzt = #{dqzt},</if>
            <if test="txTime != null">tx_time = #{txTime},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteTsbzGbjbqkById" parameterType="Long">
        delete from tsbz_gbjbqk where id = #{id}
    </delete>

    <delete id="deleteTsbzGbjbqkByIds" parameterType="String">
        delete from tsbz_gbjbqk where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

</mapper>