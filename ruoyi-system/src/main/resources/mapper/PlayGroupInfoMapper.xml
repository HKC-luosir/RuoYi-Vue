<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.PlayGroupInfoMapper">

    <select id="selectGroupInfoById" resultType="com.ruoyi.system.domain.dto.play.PlayGroupInfo">
        select * from t_play_group_info where tg_group_id = #{tgGroupId} and play_id = #{playId} and state = 0  and is_delete = 0 limit 1
    </select>

    <select id="selectSuccessGroupCount" resultType="java.lang.Integer">
        select count(*) from t_play_group_info where play_id = #{playId} AND is_delete = 0 AND state = 0 AND into_status = 2
    </select>

    <select id="selectErrorGroupCount" resultType="java.lang.Integer">
        select count(*) from t_play_group_info where play_id = #{playId} AND is_delete = 0 AND state = 0 AND into_status = 3
    </select>

    <select id="selectGroupInfoByPlayId" resultType="com.ruoyi.system.domain.dto.play.PlayGroupInfo">
        select * from t_play_group_info where play_id = #{playId} AND is_delete = 0
    </select>


    <update id="updateGroupState" >
        UPDATE t_play_group_info set is_delete = 1 where play_id = #{playId}
    </update>

    <select id="selectGroupByUrl" resultType="com.ruoyi.system.domain.dto.play.PlayGroupInfo">
       select * from t_play_group_info where play_id = #{playId} AND is_delete = 0 and group_url = #{groupUrl} limit 1
    </select>
</mapper>